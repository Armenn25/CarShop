<!-- src/app/layouts/public-layout/public-layout.component.html -->

<div class="public-layout" [class.blurred]="isLoginOpen || isRegisterOpen">
  <div class="landing-page">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <div class="hero-text">
          <div class="logo-container">
            <mat-icon class="logo-icon">storefront</mat-icon>
            <h1 class="brand-name">FIT Market</h1>
          </div>
          <h2 class="hero-title">Moderna platforma za upravljanje marketom</h2>
          <p class="hero-description">
            Pojednostavite vaše poslovanje sa našim intuitivnim sistemom za
            upravljanje proizvodima, kategorijama i zalihama. Sve što vam treba
            na jednom mjestu.
          </p>
          <div class="hero-actions">
            <!-- ako nije logovan, prikazuj CTA za login -->
            <button
              *ngIf="!isAuthenticated; else heroLogout"
              mat-raised-button
              color="primary"
              class="cta-button"
              (click)="openLoginModal()"
            >
              <mat-icon>rocket_launch</mat-icon>
              Započni sada
            </button>

            <ng-template #heroLogout>
              <button
                mat-raised-button
                color="primary"
                class="cta-button"
                (click)="logout()"
              >
                <mat-icon>logout</mat-icon>
                Odjavi se
              </button>
            </ng-template>

            <button mat-stroked-button class="secondary-button">
              <mat-icon>play_circle</mat-icon>
              Pogledaj demo
            </button>
          </div>
        </div>

        <div class="hero-image">
          <div class="floating-card card-1">
            <mat-icon>inventory_2</mat-icon>
            <span>1,250+ Proizvoda</span>
          </div>
          <div class="floating-card card-2">
            <mat-icon>trending_up</mat-icon>
            <span>95% Zadovoljstvo</span>
          </div>
          <div class="floating-card card-3">
            <mat-icon>speed</mat-icon>
            <span>Brzo &amp; Efikasno</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Features Section -->
    <!-- (ostavi svoj postojeći kod features / stats sekcija) -->

    <!-- CTA Section -->
    <section class="cta-section">
      <div class="cta-content">
        <h2>Spremni da počnete?</h2>
        <p>
          Pridružite se stotinama zadovoljnih korisnika koji su već unaprijedili
          svoje poslovanje
        </p>

        <!-- Ako NIJE logovan: prikazuj LOGIN + REGISTER -->
        <ng-container *ngIf="!isAuthenticated; else loggedInCta">
          <button
            mat-raised-button
            color="primary"
            class="cta-large-button"
            (click)="openLoginModal()"
          >
            <mat-icon>login</mat-icon>
            Prijavite se sada
          </button>

          <button
            mat-stroked-button
            class="cta-large-button cta-secondary"
            (click)="openRegisterModal()"
          >
            <mat-icon>person_add</mat-icon>
            Kreiraj nalog
          </button>
        </ng-container>

        <!-- Ako JE logovan: samo LOGOUT -->
        <ng-template #loggedInCta>
          <button
            mat-raised-button
            color="primary"
            class="cta-large-button"
            (click)="logout()"
          >
            <mat-icon>logout</mat-icon>
            Odjavi se
          </button>
        </ng-template>
      </div>
    </section>
  </div>
</div>

<!-- LOGIN POPUP (MODAL) -->
<div
  class="login-backdrop"
  *ngIf="isLoginOpen"
  (click)="closeLoginModal()"
  [class.is-closing]="isLoginClosing"
>
  <div
    class="login-modal"
    (click)="$event.stopPropagation()"
    [class.is-closing]="isLoginClosing"
  >
    <app-login
      [compact]="true"
      [openRegisterViaRouter]="false"
      (createAccount)="handleCreateAccountFromLogin()"
      (closed)="closeLoginModal()"
    ></app-login>
  </div>
</div>

<!-- REGISTER POPUP (WIZARD) -->
<div
  class="login-backdrop"
  *ngIf="isRegisterOpen"
  (click)="closeRegisterModal()"
  [class.is-closing]="isRegisterClosing"
>
  <div
    class="login-modal"
    (click)="$event.stopPropagation()"
    [class.is-closing]="isRegisterClosing"
  >
    <app-register
      [compact]="true"
      [openLoginViaRouter]="false"
      (closed)="closeRegisterModal()"
      (signIn)="handleSignInFromRegister()"
    ></app-register>
  </div>
</div>
